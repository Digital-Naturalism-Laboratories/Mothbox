---
layout: default
title: Organizing Data
parent: Processing Data
has_children: false
nav_order: 1
---
There are three key types of data you need to collect to process information from a Mothbox.
*    Deployment
*    Metadata
*    Species List

We organize our photographic data we get from "Deployments" of the Mothboxes like shown below: 
```
.
└── Country/ (Country it is operated in)
    └── Deployment_YYYY-MM-DD/  (Deployment Folder)
        ├── YYYY-MM-01 (first nightly folder of a deployment)
        ├── YYYY-MM-02 (second...)
        └── YYYY-MM-03/
            ├── DEVICE_YYYY-MM-DD-HH-MM-SS.jpg  (Raw Image collected)
            ├── DEVICE_YYYY-MM-DD-HH-MM-SS.json (Yolo detection with auto-ID)
            └── DEVICE_YYYY-MM-DD-HH-MM-SS_metadata.json
```
In addition to the photo data, there are two other files you will need to completely process your data.
* Metadata CSV
    * This ties the photos and IDs to metadata like location and date
* Species List
    * This improves the automatic Identification process by limiting the guess to only creatures that might be in your desired location and type of creature (e.g. Insecta or more broadly like Arthropoda)    

These two files don't have to be organized in any special way, but we keep [examples of these files in the AI folder of the github repo](https://github.com/Digital-Naturalism-Laboratories/Mothbox/tree/main/AI)

{: .important-title }
> Please Organize Your Data like this!
>
> There might be better ways to organize this stuff, and we are open to suggestions! But for now, it's important to try to organize your data like this because the scripts we are whipping together to process your images rely on an organization and naming structure like this to tie together the different types of data!

Below, we will discuss more particulars about good ways to organize the Deployment, Metadata, and Species List.

# Deployment
Each "deployment" is a data from device left out in the field somewhere.

## Deployment Name
The deployment has a unique name like this:
```
AREA_SITE_DEVICE_YYYY-MM-DD
```
The "Area" is a broad area that a specific field agent tends to work on, like "MtTotumas" (No spaces)
The "Site" is a human name for the very specific place you left the Mothbox, like "TreeNearLodge" (No Spaces)
The "Device" is a unique name that the Mothbox calls itself. These are names based off the internal serial number of the Raspberry Pi on the Mothbox meshed with a list we made of Spanish and English verbs, nouns, and adjectives. Like "FuerteFrog"
Then there is a date stamp that marks the first day a mothbox was left out in the field. like 2024-04-30. The format is YYYY-MM-DD.

## Nightly Folders
A deployment usually has several nights. Each night is collected in its own folder. The nightly folders are automatically created by the Mothbox and have a basic format:
```
YYYY-MM-DD
```
{: .note }
> A special note about Mothbox "nights." Since most of our data collection happens at night, each night for these folders runs from **12:00 pm of the first day** it is left out until **11:59am of the next day.** In this way, images captured at, for instance, 3AM are considered part of the same night that started 10 hours earlier at 7 PM the preceding day.

## Samples
Each data "sample" consists of a set of grouped files.
```
DEVICE_YYYY-MM-DD-HH-MM-SS.jpg  (Raw Image collected)
DEVICE_YYYY-MM-DD-HH-MM-SS_botdetection.json (Bot created labels)
DEVICE_YYYY-MM-DD-HH-MM-SS.json (Human created labels)
```
* Raw Image

The "raw" photos we capture look like this. They are insects on a white background. 

![image](https://github.com/user-attachments/assets/b7c24479-4508-4823-b978-6c5e3e1918b9)


* Bot created labels

Each sample photo might also have a similarly named file next to it, but the file type is ".json" and the file name ends with "botdetection." These are files generated by automated means to detect where the insects are in the photo. Generally these files are made by the Mothbot_Detect.py script.

* Human created labels

There are files that have the same name as the Raw Image but end with ".json". These are human-created "Ground-Truth" datasets. They don't have "botdetection" on the ends their file names.







# Processing Pipeline
## Metadata
Next we [create a metadata file](https://github.com/Digital-Naturalism-Laboratories/Mothbox/blob/main/AI/Auto%20Calculations%20-%20Mothbox%20Main%20Metadata%20field%20sheet%20(Bilingue)%20(Responses)%20-%20Form%20responses%201.csv) for each raw photo. This contains information about the sampling like:
```
- GPS: [lat,lon]
- Person Who Collected it
- Land Use Type
- Type of Mothbox Deployed
- Any additional Data
```

### Detection Data
Finally the data about individual insects is stored in another .json file that has the same name as the original raw photo. This detection data is created by several scripts.
[First a script (Mothbox_Detect.py)](https://digital-naturalism-laboratories.github.io/Mothbox/docs/processing/detect/) uses a trained Yolo model to detect where there might be interesting creatures present in the image. Its data looks like this when visualized in a program like X-Anylabelling:
![image](https://github.com/user-attachments/assets/3b5bf6d8-4b3a-4dc0-ab31-53846459cb1c)

Then we feed all those detections in another pass to a [different script called Mothbox_ID.py, which uses BioCLIP](https://digital-naturalism-laboratories.github.io/Mothbox/docs/processing/detect/) to automatically ID the different creatures detected. 
It gives the detections labels based on the taxa it predicts them to be:
![image](https://github.com/user-attachments/assets/30f74418-08eb-437d-8447-1b2f3387b610)

### Database Editing
Finally there are some remaining scripts that help you open this data in database visualization and editing systems like Voxel51. 
![image](https://github.com/user-attachments/assets/b7b0ba22-1786-4239-8de3-3a71ca0ff865)


